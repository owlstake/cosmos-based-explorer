"use strict";(self["webpackChunkping_wallet"]=self["webpackChunkping_wallet"]||[]).push([[642],{10642:function(t,e,n){n.r(e),n.d(e,{default:function(){return d}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container-md"},[n("b-card",[n("b-card-title",[t._v(" What's State Sync? ")]),t._v(" The Tendermint Core 0.34 release includes support for state sync, which allows a new node to join a network by fetching a snapshot of the application state at a recent height instead of fetching and replaying all historical blocks. This can reduce the time needed to sync with the network from days to minutes. Click "),n("a",{attrs:{href:"https://blog.cosmos.network/cosmos-sdk-state-sync-guide-99e4cf43be2f"}},[t._v("here")]),t._v(" for more infomation. ")],1),n("b-card",[n("b-card-title",[t._v(" Starting New Node From State Sync "),t.snapshot_provider?t._e():n("b-badge",{attrs:{variant:"danger"}},[t._v(" WIP ")])],1),n("b",{staticClass:"mt-1"},[t._v("1. Install Binary ("+t._s(t.version)+")")]),n("br"),t._v(" We need to install the binary first and make sure that the version is the one currently in use on mainnet. "),n("br"),n("br"),n("b",{staticClass:"mt-1"},[t._v("2. Enable State Sync")]),n("br"),t._v(" We can configure Tendermint to use state sync in "),n("code",[t._v("$DAEMON_HOME/config/config.toml")]),t._v(", then start daemon. "),n("ul",{staticClass:"mt-1"},t._l(t.error,(function(e){return n("li",{key:e,staticClass:"text-danger"},[t._v(" "+t._s(e)+" ")])})),0),n("b-form-textarea",{staticClass:"my-1",attrs:{id:"textarea-state",state:t.valid,readonly:"",placeholder:"Loading...",rows:"7"},on:{change:function(e){return t.check()}},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}})],1),n("b-card",[n("b-card-title",[t._v(" Enable Snapshot For State Sync ")]),t._v(" To make state sync works, we can enable snapshot in "),n("code",[t._v("$DAEMON_HOME/config/app.toml")]),t._v(" and don't forget to share your snapshot server "),n("a",{attrs:{href:"https://github.com/ping-pub/explorer/discussions"}},[t._v("Here")]),n("b-form-textarea",{staticClass:"mt-1",attrs:{id:"snapshot",readonly:"",rows:"8"},model:{value:t.snapshot,callback:function(e){t.snapshot=e},expression:"snapshot"}})],1)],1)},r=[],o=n(26034),s=n(8775),a=n(49379),c=n(85961),u={components:{BBadge:o.k,BCard:s._,BCardTitle:a._,BFormTextarea:c.y},data(){const{rpc:t,snapshot_provider:e}=this.$store.state.chains.selected;let n="";if(t&&Array.isArray(t)){let e=t;1===e.length&&(e=e.concat(e)),n=e.map((t=>{const e=new URL(t);return""===e.port?`${e.protocol}//${e.hostname}:${e.protocol.startsWith("https")?"443":"80"}`:`${e.protocol}//${e.hostname}:${e.port}`})).join(",")}const i=e,r=i?`# Comma separated list of nodes to keep persistent connections to \npersistent_peers = "${i}" `:"OMGï¼ There is NO available providers, but you can try it.";return{version:"",snapshot_provider:e,servers:n,providers:r,height:0,hash:"",error:[],state:"",valid:!1,snapshot:"[state-sync]\n# snapshot-interval specifies the block interval at which local state sync snapshots are\n# taken (0 to disable). Must be a multiple of pruning-keep-every.\nsnapshot-interval = 1000\n\n# snapshot-keep-recent specifies the number of recent snapshots to keep and serve (0 to keep all). Each snapshot is about 500MiB\nsnapshot-keep-recent = 2"}},created(){const t=1e3;this.$http.getLatestBlock().then((e=>{const{height:n}=e.block.header;n>3*t&&this.$http.getBlockByHeight(Math.trunc((n-3*t)/t)*t).then((t=>{this.hash=t.block_id.hash,this.height=t.block.header.height,this.state=`[statesync]\nenable = true\nrpc_servers = "${this.servers}"\ntrust_height = ${this.height}\ntrust_hash = "${this.hash}"\ntrust_period = "168h"  # 2/3 of unbonding time`,this.check()})),this.$http.getNodeInfo().then((t=>{this.version=t.application_version.version}))}))},methods:{check(){return this.valid=!0,this.error=[],this.state.split("\n").forEach((t=>{const e=this.kv(t);"trust_height"===e[0]&&Number(e[1])<1&&(this.valid=!1,this.error.push("Trust Height should be set.")),"trust_hash"===e[0]&&e[1].length<10&&(this.valid=!1,this.error.push("Trust Hash is invalid.")),"rpc_servers"===e[0]&&(e[1].indexOf(",")>1?e[1].replace(/"/g,"").split(",").forEach((t=>{const e=/^(.)+:\d+$/g;e.test(t)||(this.valid=!1,this.error.push(`"${t}" is not a valid host. Make sure that the port is added.`))})):(this.valid=!1,this.error.push("No RPC serser is configured.")))})),this.valid},kv(t){if(t&&t.indexOf("=")>0){const e=t.split("=");return[e[0].trim(),e[1].trim()]}return[]}}},l=u,h=n(1001),p=(0,h.Z)(l,i,r,!1,null,null,null),d=p.exports},26034:function(t,e,n){n.d(e,{k:function(){return m}});var i=n(20144),r=n(69558),o=n(94689),s=n(12299),a=n(67040),c=n(20451),u=n(30488),l=n(67347);function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f=(0,a.CE)(l.NQ,["event","routerTag"]);delete f.href.default,delete f.to.default;var v=(0,c.y2)((0,a.GE)(p(p({},f),{},{pill:(0,c.pi)(s.U5,!1),tag:(0,c.pi)(s.N0,"span"),variant:(0,c.pi)(s.N0,"secondary")})),o.dJ),m=i["default"].extend({name:o.dJ,functional:!0,props:v,render:function(t,e){var n=e.props,i=e.data,o=e.children,s=n.active,a=n.disabled,h=(0,u.u$)(n),p=h?l.we:n.tag,d=n.variant||"secondary";return t(p,(0,r.b)(i,{staticClass:"badge",class:["badge-".concat(d),{"badge-pill":n.pill,active:s,disabled:a}],props:h?(0,c.uj)(f,n):{}}),o)}})},85961:function(t,e,n){n.d(e,{y:function(){return R}});var i=n(20144),r=n(94689),o=n(12299),s=n(26410),a=n(33284),c=n(21578),u=n(93954),l=n(67040),h=n(20451),p=n(32023),d=n(80685),f=n(49035),v=n(95505),m=n(70403),b=n(94791),g=n(73727),y=n(98596),w=n(76677),O=n(30824),_=n(3058);function k(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function x(t,e,n){return e&&$(t.prototype,e),n&&$(t,n),t}var j="__bv__visibility_observer",P=function(){function t(e,n,i){k(this,t),this.el=e,this.callback=n.callback,this.margin=n.margin||0,this.once=n.once||!1,this.observer=null,this.visible=void 0,this.doneOnce=!1,this.createObserver(i)}return x(t,[{key:"createObserver",value:function(t){var e=this;if(this.observer&&this.stop(),!this.doneOnce&&(0,a.mf)(this.callback)){try{this.observer=new IntersectionObserver(this.handler.bind(this),{root:null,rootMargin:this.margin,threshold:0})}catch(n){return this.doneOnce=!0,this.observer=void 0,void this.callback(null)}t.context.$nextTick((function(){(0,s.bz)((function(){e.observer&&e.observer.observe(e.el)}))}))}}},{key:"handler",value:function(t){var e=t?t[0]:{},n=Boolean(e.isIntersecting||e.intersectionRatio>0);n!==this.visible&&(this.visible=n,this.callback(n),this.once&&this.visible&&(this.doneOnce=!0,this.stop()))}},{key:"stop",value:function(){this.observer&&this.observer.disconnect(),this.observer=null}}]),t}(),C=function(t){var e=t[j];e&&e.stop&&e.stop(),delete t[j]},V=function(t,e,n){var i=e.value,r=e.modifiers,o={margin:"0px",once:!1,callback:i};(0,l.XP)(r).forEach((function(t){O.R2.test(t)?o.margin="".concat(t,"px"):"once"===t.toLowerCase()&&(o.once=!0)})),C(t),t[j]=new P(t,o,n),t[j]._prevModifiers=(0,l.d9)(r)},S=function(t,e,n){var i=e.value,r=e.oldValue,o=e.modifiers;o=(0,l.d9)(o),!t||i===r&&t[j]&&(0,_.W)(o,t[j]._prevModifiers)||V(t,{value:i,modifiers:o},n)},D=function(t){C(t)},E={bind:V,componentUpdated:S,unbind:D};function M(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function N(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?M(Object(n),!0).forEach((function(e){T(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function T(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var B=(0,h.y2)((0,l.GE)(N(N(N(N(N(N({},g.N),p.N),f.N),v.N),m.NQ),{},{maxRows:(0,h.pi)(o.fE),noAutoShrink:(0,h.pi)(o.U5,!1),noResize:(0,h.pi)(o.U5,!1),rows:(0,h.pi)(o.fE,2),wrap:(0,h.pi)(o.N0,"soft")})),r.eo),R=i["default"].extend({name:r.eo,directives:{"b-visible":E},mixins:[w.o,g.t,y.E,p.X,f.j,v.J,m.Q_,d.o,b.e],props:B,data:function(){return{heightInPx:null}},computed:{computedStyle:function(){var t={resize:!this.computedRows||this.noResize?"none":null};return this.computedRows||(t.height=this.heightInPx,t.overflowY="scroll"),t},computedMinRows:function(){return(0,c.nP)((0,u.Z3)(this.rows,2),2)},computedMaxRows:function(){return(0,c.nP)(this.computedMinRows,(0,u.Z3)(this.maxRows,0))},computedRows:function(){return this.computedMinRows===this.computedMaxRows?this.computedMinRows:null},computedAttrs:function(){var t=this.disabled,e=this.required;return{id:this.safeId(),name:this.name||null,form:this.form||null,disabled:t,placeholder:this.placeholder||null,required:e,autocomplete:this.autocomplete||null,readonly:this.readonly||this.plaintext,rows:this.computedRows,wrap:this.wrap||null,"aria-required":this.required?"true":null,"aria-invalid":this.computedAriaInvalid}},computedListeners:function(){return N(N({},this.bvListeners),{},{input:this.onInput,change:this.onChange,blur:this.onBlur})}},watch:{localValue:function(){this.setHeight()}},mounted:function(){this.setHeight()},methods:{visibleCallback:function(t){t&&this.$nextTick(this.setHeight)},setHeight:function(){var t=this;this.$nextTick((function(){(0,s.bz)((function(){t.heightInPx=t.computeHeight()}))}))},computeHeight:function(){if(this.$isServer||!(0,a.Ft)(this.computedRows))return null;var t=this.$el;if(!(0,s.pn)(t))return null;var e=(0,s.yD)(t),n=(0,u.f_)(e.lineHeight,1),i=(0,u.f_)(e.borderTopWidth,0)+(0,u.f_)(e.borderBottomWidth,0),r=(0,u.f_)(e.paddingTop,0)+(0,u.f_)(e.paddingBottom,0),o=i+r,l=n*this.computedMinRows+o,h=(0,s.C2)(t,"height")||e.height;(0,s.A_)(t,"height","auto");var p=t.scrollHeight;(0,s.A_)(t,"height",h);var d=(0,c.nP)((p-r)/n,2),f=(0,c.bS)((0,c.nP)(d,this.computedMinRows),this.computedMaxRows),v=(0,c.nP)((0,c.hv)(f*n+o),l);return this.noAutoShrink&&(0,u.f_)(h,0)>v?h:"".concat(v,"px")}},render:function(t){return t("textarea",{class:this.computedClass,style:this.computedStyle,directives:[{name:"b-visible",value:this.visibleCallback,modifiers:{640:!0}}],attrs:this.computedAttrs,domProps:{value:this.localValue},on:this.computedListeners,ref:"input"})}})},32023:function(t,e,n){n.d(e,{N:function(){return c},X:function(){return u}});var i=n(20144),r=n(12299),o=n(26410),s=n(20451),a="input, textarea, select",c=(0,s.y2)({autofocus:(0,s.pi)(r.U5,!1),disabled:(0,s.pi)(r.U5,!1),form:(0,s.pi)(r.N0),id:(0,s.pi)(r.N0),name:(0,s.pi)(r.N0),required:(0,s.pi)(r.U5,!1)},"formControls"),u=i["default"].extend({props:c,mounted:function(){this.handleAutofocus()},activated:function(){this.handleAutofocus()},methods:{handleAutofocus:function(){var t=this;this.$nextTick((function(){(0,o.bz)((function(){var e=t.$el;t.autofocus&&(0,o.pn)(e)&&((0,o.wB)(e,a)||(e=(0,o.Ys)(a,e)),(0,o.KS)(e))}))}))}}})},80685:function(t,e,n){n.d(e,{o:function(){return r}});var i=n(20144),r=i["default"].extend({computed:{selectionStart:{cache:!1,get:function(){return this.$refs.input.selectionStart},set:function(t){this.$refs.input.selectionStart=t}},selectionEnd:{cache:!1,get:function(){return this.$refs.input.selectionEnd},set:function(t){this.$refs.input.selectionEnd=t}},selectionDirection:{cache:!1,get:function(){return this.$refs.input.selectionDirection},set:function(t){this.$refs.input.selectionDirection=t}}},methods:{select:function(){var t;(t=this.$refs.input).select.apply(t,arguments)},setSelectionRange:function(){var t;(t=this.$refs.input).setSelectionRange.apply(t,arguments)},setRangeText:function(){var t;(t=this.$refs.input).setRangeText.apply(t,arguments)}}})},49035:function(t,e,n){n.d(e,{N:function(){return s},j:function(){return a}});var i=n(20144),r=n(12299),o=n(20451),s=(0,o.y2)({size:(0,o.pi)(r.N0)},"formControls"),a=i["default"].extend({props:s,computed:{sizeFormClass:function(){return[this.size?"form-control-".concat(this.size):null]}}})},95505:function(t,e,n){n.d(e,{J:function(){return c},N:function(){return a}});var i=n(20144),r=n(12299),o=n(33284),s=n(20451),a=(0,s.y2)({state:(0,s.pi)(r.U5,null)},"formState"),c=i["default"].extend({props:a,computed:{computedState:function(){return(0,o.jn)(this.state)?this.state:null},stateClass:function(){var t=this.computedState;return!0===t?"is-valid":!1===t?"is-invalid":null},computedAriaInvalid:function(){var t=this.ariaInvalid;return!0===t||"true"===t||""===t||!1===this.computedState?"true":t}}})},70403:function(t,e,n){n.d(e,{NQ:function(){return _},Q_:function(){return k}});var i=n(20144),r=n(63294),o=n(12299),s=n(26410),a=n(28415),c=n(21578),u=n(54602),l=n(93954),h=n(67040),p=n(20451),d=n(46595);function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){m(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var b=(0,u.l)("value",{type:o.fE,defaultValue:"",event:r.OS}),g=b.mixin,y=b.props,w=b.prop,O=b.event,_=(0,p.y2)((0,h.GE)(v(v({},y),{},{ariaInvalid:(0,p.pi)(o.gL,!1),autocomplete:(0,p.pi)(o.N0),debounce:(0,p.pi)(o.fE,0),formatter:(0,p.pi)(o.Sx),lazy:(0,p.pi)(o.U5,!1),lazyFormatter:(0,p.pi)(o.U5,!1),number:(0,p.pi)(o.U5,!1),placeholder:(0,p.pi)(o.N0),plaintext:(0,p.pi)(o.U5,!1),readonly:(0,p.pi)(o.U5,!1),trim:(0,p.pi)(o.U5,!1)})),"formTextControls"),k=i["default"].extend({mixins:[g],props:_,data:function(){var t=this[w];return{localValue:(0,d.BB)(t),vModelValue:this.modifyValue(t)}},computed:{computedClass:function(){var t=this.plaintext,e=this.type,n="range"===e,i="color"===e;return[{"custom-range":n,"form-control-plaintext":t&&!n&&!i,"form-control":i||!t&&!n},this.sizeFormClass,this.stateClass]},computedDebounce:function(){return(0,c.nP)((0,l.Z3)(this.debounce,0),0)},hasFormatter:function(){return(0,p.lo)(this.formatter)}},watch:m({},w,(function(t){var e=(0,d.BB)(t),n=this.modifyValue(t);e===this.localValue&&n===this.vModelValue||(this.clearDebounce(),this.localValue=e,this.vModelValue=n)})),created:function(){this.$_inputDebounceTimer=null},mounted:function(){this.$on(r.vl,this.clearDebounce)},beforeDestroy:function(){this.clearDebounce()},methods:{clearDebounce:function(){clearTimeout(this.$_inputDebounceTimer),this.$_inputDebounceTimer=null},formatValue:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t=(0,d.BB)(t),!this.hasFormatter||this.lazyFormatter&&!n||(t=this.formatter(t,e)),t},modifyValue:function(t){return t=(0,d.BB)(t),this.trim&&(t=t.trim()),this.number&&(t=(0,l.f_)(t,t)),t},updateValue:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.lazy;if(!i||n){this.clearDebounce();var r=function(){if(t=e.modifyValue(t),t!==e.vModelValue)e.vModelValue=t,e.$emit(O,t);else if(e.hasFormatter){var n=e.$refs.input;n&&t!==n.value&&(n.value=t)}},o=this.computedDebounce;o>0&&!i&&!n?this.$_inputDebounceTimer=setTimeout(r,o):r()}},onInput:function(t){if(!t.target.composing){var e=t.target.value,n=this.formatValue(e,t);!1===n||t.defaultPrevented?(0,a.p7)(t,{propagation:!1}):(this.localValue=n,this.updateValue(n),this.$emit(r.gn,n))}},onChange:function(t){var e=t.target.value,n=this.formatValue(e,t);!1===n||t.defaultPrevented?(0,a.p7)(t,{propagation:!1}):(this.localValue=n,this.updateValue(n,!0),this.$emit(r.z2,n))},onBlur:function(t){var e=t.target.value,n=this.formatValue(e,t,!0);!1!==n&&(this.localValue=(0,d.BB)(this.modifyValue(n)),this.updateValue(n,!0)),this.$emit(r.z,t)},focus:function(){this.disabled||(0,s.KS)(this.$el)},blur:function(){this.disabled||(0,s.Cx)(this.$el)}}})},94791:function(t,e,n){n.d(e,{e:function(){return r}});var i=n(20144),r=i["default"].extend({computed:{validity:{cache:!1,get:function(){return this.$refs.input.validity}},validationMessage:{cache:!1,get:function(){return this.$refs.input.validationMessage}},willValidate:{cache:!1,get:function(){return this.$refs.input.willValidate}}},methods:{setCustomValidity:function(){var t;return(t=this.$refs.input).setCustomValidity.apply(t,arguments)},checkValidity:function(){var t;return(t=this.$refs.input).checkValidity.apply(t,arguments)},reportValidity:function(){var t;return(t=this.$refs.input).reportValidity.apply(t,arguments)}}})}}]);