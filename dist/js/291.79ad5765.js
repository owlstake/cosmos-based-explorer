"use strict";(self["webpackChunkping_wallet"]=self["webpackChunkping_wallet"]||[]).push([[291],{17291:function(t,e,o){o.r(e),o.d(e,{default:function(){return P}});var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("b-row",{staticClass:"match-height"},t._l(t.proposals,(function(e){return o("b-col",{key:e.id,attrs:{lg:"6",md:"12"}},[o("b-card",[o("b-card-title",{staticClass:"mb-0"},[t._v(" #"+t._s(e.id)+". "),1==e.status?o("b-badge",{staticClass:"text-right",attrs:{pill:"",variant:"light-info"}},[t._v(" Deposit ")]):t._e(),2==e.status?o("b-badge",{staticClass:"text-right",attrs:{pill:"",variant:"light-primary"}},[t._v(" Voting ")]):t._e(),3==e.status?o("b-badge",{staticClass:"text-right",attrs:{pill:"",variant:"light-success"}},[t._v(" Passed ")]):t._e(),4==e.status?o("b-badge",{staticClass:"text-right",attrs:{pill:"",variant:"light-danger"}},[t._v(" Rejected ")]):t._e(),o("router-link",{attrs:{to:"./gov/"+e.id}},[t._v(" "+t._s(e.title)+" ")])],1),o("div",{staticClass:"gov-wrapper flex-wrap my-1"},[o("div",{staticClass:"gov"},[o("p",{staticClass:"card-text mb-25"},[t._v(" Type ")]),o("h6",{staticClass:"mb-0"},[t._v(" "+t._s(t.formatType(e.contents["@type"]))+" ")])]),o("div",{staticClass:"gov"},[o("p",{staticClass:"card-text mb-25"},[t._v(" Start Date ")]),o("h6",{staticClass:"mb-0"},[t._v(" "+t._s(t.formatDate(e.voting_start_time))+" ")])]),o("div",{staticClass:"gov"},[o("p",{staticClass:"card-text mb-25"},[t._v(" End Date ")]),o("h6",{staticClass:"mb-0"},[t._v(" "+t._s(t.formatDate(e.voting_end_time))+" ")])]),o("div",{staticClass:"gov"},[o("p",{staticClass:"card-text mb-25"},[t._v(" Deposit ")]),o("h6",{staticClass:"mb-0"},[t._v(" "+t._s(t.formatToken(e.total_deposit)||"-")+" ")])])]),o("b-progress",{staticClass:"mb-2",attrs:{max:100,height:"2rem","show-progress":""}},[o("b-progress-bar",{attrs:{id:"vote-yes"+e.id,variant:"success",value:t.percent(e.tally.yes),"show-progress":"",label:t.percent(e.tally.yes).toFixed()+"%"}}),o("b-progress-bar",{attrs:{id:"vote-no"+e.id,variant:"warning",value:t.percent(e.tally.no),label:t.percent(e.tally.no).toFixed()+"%","show-progress":""}}),o("b-progress-bar",{attrs:{id:"vote-veto"+e.id,variant:"danger",value:t.percent(e.tally.veto),label:t.percent(e.tally.veto).toFixed()+"%","show-progress":""}}),o("b-progress-bar",{attrs:{id:"vote-abstain"+e.id,variant:"info",value:t.percent(e.tally.abstain),label:t.percent(e.tally.abstain).toFixed()+"%","show-progress":""}})],1),o("b-tooltip",{attrs:{target:"vote-yes"+e.id}},[t._v(" "+t._s(t.percent(e.tally.yes))+"% voted Yes ")]),o("b-tooltip",{attrs:{target:"vote-no"+e.id}},[t._v(" "+t._s(t.percent(e.tally.no))+"% voted No ")]),o("b-tooltip",{attrs:{target:"vote-veto"+e.id}},[t._v(" "+t._s(t.percent(e.tally.veto))+"% voted No With Veto ")]),o("b-tooltip",{attrs:{target:"vote-abstain"+e.id}},[t._v(" "+t._s(t.percent(e.tally.abstain))+"% voted Abstain ")]),o("b-card-footer",{staticClass:"pb-0"},[o("router-link",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(113, 102, 240, 0.15)",expression:"'rgba(113, 102, 240, 0.15)'",modifiers:{400:!0}}],attrs:{to:"./gov/"+e.id,variant:"outline-primary"}},[o("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(113, 102, 240, 0.15)",expression:"'rgba(113, 102, 240, 0.15)'",modifiers:{400:!0}}],attrs:{href:"./gov/"+e.id,variant:"outline-primary"}},[t._v(" "+t._s(t.$t("btn_detail"))+" ")])],1),1===e.status?o("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.operation-modal",modifiers:{"operation-modal":!0}}],staticClass:"btn float-right mg-2",attrs:{variant:"primary"},on:{click:function(o){return t.selectProposal("GovDeposit",e.id,e.title)}}},[t._v(" "+t._s(t.$t("btn_deposit"))+" ")]):t._e(),2===e.status?o("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.operation-modal",modifiers:{"operation-modal":!0}}],staticClass:"btn float-right mg-2",attrs:{variant:"primary"},on:{click:function(o){return t.selectProposal("Vote",e.id,e.title)}}},[t._v(" "+t._s(t.$t("btn_vote"))+" ")]):t._e()],1)],1)],1)})),1),t.next?o("b-row",[o("b-col",[o("b-button",{attrs:{block:"",variant:"outline-primary",disabled:t.loading},on:{click:function(e){return t.getList()}}},[t._v(" Load More ")])],1)],1):t._e(),o("operation-modal",{attrs:{type:t.operationModalType,"proposal-id":t.selectedProposalId,"proposal-title":t.selectedTitle}})],1)},i=[],n=o(8775),s=o(15193),r=o(37674),l=o(22981),p=o(45752),c=o(26034),d=o(49379),u=o(18365),h=o(26253),b=o(50725),v=o(82653),f=o(20266),g=o(35436),m=o(27484),y=o.n(m),_=o(92901),$={components:{BCard:n._,BButton:s.T,BCardFooter:r.F,BProgressBar:l.Q,BProgress:p.D,BBadge:c.k,BCardTitle:d._,BTooltip:u.T,BRow:h.T,BCol:b.l,OperationModal:_.Z},directives:{"b-modal":v.T,Ripple:f.Z},data(){return{selectedProposalId:0,selectedTitle:"",proposals:[],max:1,operationModalType:"",next:""}},mounted(){this.getList()},methods:{formatType(t){const e=String(t).replace("Proposal",""),o=e.lastIndexOf(".");return o>0?e.substring(o+1):e},percent:t=>(0,g.percent)(t),formatDate:t=>y()(t).format("YYYY-MM-DD"),formatToken:t=>(0,g.tokenFormatter)(t,{}),selectProposal(t,e,o){this.operationModalType=t,this.selectedProposalId=Number(e),this.selectedTitle=o},getList(){this.loading=!0,this.$http.getGovernanceList(this.next).then((t=>{this.proposals=this.proposals.concat(t.proposals),this.updateTally(this.proposals),this.next=t.pagination.next_key,this.loading=!1}))},updateTally(t){const e=t.filter((t=>2===t.status));e.length>0&&e.forEach((t=>this.$http.getGovernanceTally(t.id,0).then((e=>{this.$set(t,"tally",e)}))))}}},w=$,C=o(1001),O=(0,C.Z)(w,a,i,!1,null,"34625b35",null),P=O.exports},26034:function(t,e,o){o.d(e,{k:function(){return f}});var a=o(20144),i=o(69558),n=o(94689),s=o(12299),r=o(67040),l=o(20451),p=o(30488),c=o(67347);function d(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,a)}return o}function u(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?d(Object(o),!0).forEach((function(e){h(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):d(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function h(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var b=(0,r.CE)(c.NQ,["event","routerTag"]);delete b.href.default,delete b.to.default;var v=(0,l.y2)((0,r.GE)(u(u({},b),{},{pill:(0,l.pi)(s.U5,!1),tag:(0,l.pi)(s.N0,"span"),variant:(0,l.pi)(s.N0,"secondary")})),n.dJ),f=a["default"].extend({name:n.dJ,functional:!0,props:v,render:function(t,e){var o=e.props,a=e.data,n=e.children,s=o.active,r=o.disabled,d=(0,p.u$)(o),u=d?c.we:o.tag,h=o.variant||"secondary";return t(u,(0,i.b)(a,{staticClass:"badge",class:["badge-".concat(h),{"badge-pill":o.pill,active:s,disabled:r}],props:d?(0,l.uj)(b,o):{}}),n)}})},18365:function(t,e,o){o.d(e,{N:function(){return C},T:function(){return O}});var a,i,n=o(20144),s=o(94689),r=o(63294),l=o(12299),p=o(28112),c=o(13597),d=o(33284),u=o(67040),h=o(20451),b=o(18280),v=o(40960);function f(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,a)}return o}function g(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?f(Object(o),!0).forEach((function(e){m(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):f(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function m(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var y="disabled",_=r.j7+y,$="show",w=r.j7+$,C=(0,h.y2)((a={boundary:(0,h.pi)([p.mv,l.aR,l.N0],"scrollParent"),boundaryPadding:(0,h.pi)(l.fE,50),container:(0,h.pi)([p.mv,l.aR,l.N0]),customClass:(0,h.pi)(l.N0),delay:(0,h.pi)(l.$k,50)},m(a,y,(0,h.pi)(l.U5,!1)),m(a,"fallbackPlacement",(0,h.pi)(l.Mu,"flip")),m(a,"id",(0,h.pi)(l.N0)),m(a,"noFade",(0,h.pi)(l.U5,!1)),m(a,"noninteractive",(0,h.pi)(l.U5,!1)),m(a,"offset",(0,h.pi)(l.fE,0)),m(a,"placement",(0,h.pi)(l.N0,"top")),m(a,$,(0,h.pi)(l.U5,!1)),m(a,"target",(0,h.pi)([p.mv,p.t_,l.Sx,l.aR,l.N0],void 0,!0)),m(a,"title",(0,h.pi)(l.N0)),m(a,"triggers",(0,h.pi)(l.Mu,"hover focus")),m(a,"variant",(0,h.pi)(l.N0)),a),s.qv),O=n["default"].extend({name:s.qv,mixins:[b.Z],inheritAttrs:!1,props:C,data:function(){return{localShow:this[$],localTitle:"",localContent:""}},computed:{templateData:function(){return g({title:this.localTitle,content:this.localContent,interactive:!this.noninteractive},(0,u.ei)(this.$props,["boundary","boundaryPadding","container","customClass","delay","fallbackPlacement","id","noFade","offset","placement","target","target","triggers","variant",y]))},templateTitleContent:function(){var t=this.title,e=this.content;return{title:t,content:e}}},watch:(i={},m(i,$,(function(t,e){t!==e&&t!==this.localShow&&this.$_toolpop&&(t?this.$_toolpop.show():this.$_toolpop.forceHide())})),m(i,y,(function(t){t?this.doDisable():this.doEnable()})),m(i,"localShow",(function(t){this.$emit(w,t)})),m(i,"templateData",(function(){var t=this;this.$nextTick((function(){t.$_toolpop&&t.$_toolpop.updateData(t.templateData)}))})),m(i,"templateTitleContent",(function(){this.$nextTick(this.updateContent)})),i),created:function(){this.$_toolpop=null},updated:function(){this.$nextTick(this.updateContent)},beforeDestroy:function(){this.$off(r.oJ,this.doOpen),this.$off(r.Cc,this.doClose),this.$off(r.MH,this.doDisable),this.$off(r.wV,this.doEnable),this.$_toolpop&&(this.$_toolpop.$destroy(),this.$_toolpop=null)},mounted:function(){var t=this;this.$nextTick((function(){var e=t.getComponent();t.updateContent();var o=(0,c.P)(t)||(0,c.P)(t.$parent),a=t.$_toolpop=new e({parent:t,_scopeId:o||void 0});a.updateData(t.templateData),a.$on(r.l0,t.onShow),a.$on(r.AS,t.onShown),a.$on(r.yM,t.onHide),a.$on(r.v6,t.onHidden),a.$on(r.gi,t.onDisabled),a.$on(r.VU,t.onEnabled),t[y]&&t.doDisable(),t.$on(r.oJ,t.doOpen),t.$on(r.Cc,t.doClose),t.$on(r.MH,t.doDisable),t.$on(r.wV,t.doEnable),t.localShow&&a.show()}))},methods:{getComponent:function(){return v.j},updateContent:function(){this.setTitle(this.normalizeSlot()||this.title)},setTitle:function(t){t=(0,d.Jp)(t)?"":t,this.localTitle!==t&&(this.localTitle=t)},setContent:function(t){t=(0,d.Jp)(t)?"":t,this.localContent!==t&&(this.localContent=t)},onShow:function(t){this.$emit(r.l0,t),t&&(this.localShow=!t.defaultPrevented)},onShown:function(t){this.localShow=!0,this.$emit(r.AS,t)},onHide:function(t){this.$emit(r.yM,t)},onHidden:function(t){this.$emit(r.v6,t),this.localShow=!1},onDisabled:function(t){t&&t.type===r.gi&&(this.$emit(_,!0),this.$emit(r.gi,t))},onEnabled:function(t){t&&t.type===r.VU&&(this.$emit(_,!1),this.$emit(r.VU,t))},doOpen:function(){!this.localShow&&this.$_toolpop&&this.$_toolpop.show()},doClose:function(){this.localShow&&this.$_toolpop&&this.$_toolpop.hide()},doDisable:function(){this.$_toolpop&&this.$_toolpop.disable()},doEnable:function(){this.$_toolpop&&this.$_toolpop.enable()}},render:function(t){return t()}})}}]);