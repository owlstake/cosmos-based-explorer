"use strict";(self["webpackChunkping_wallet"]=self["webpackChunkping_wallet"]||[]).push([[922],{7922:function(t,e,a){a.r(e),a.d(e,{default:function(){return C}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.pingVals&&t.pingVals.length>0?a("b-card",{staticClass:"overflow-auto",attrs:{title:"❤️ Helping Ping.pub By Staking ❤️"}},[a("b-table",{attrs:{items:t.pingVals,fields:t.validator_fields,"sort-desc":!0,"sort-by":"tokens",striped:"",hover:"",responsive:"sm"},scopedSlots:t._u([{key:"cell(index)",fn:function(e){return[t._v(" "+t._s(e.index+1)+" ")]}},{key:"cell(description)",fn:function(e){return[a("b-media",{staticClass:"text-truncate",staticStyle:{"max-width":"320px"},attrs:{"vertical-align":"center"},scopedSlots:t._u([{key:"aside",fn:function(){return[e.item.avatar?a("b-avatar",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.v-primary",modifiers:{hover:!0,"v-primary":!0}},{name:"b-tooltip",rawName:"v-b-tooltip.hover.right",value:e.item.description.details,expression:"data.item.description.details",modifiers:{hover:!0,right:!0}}],attrs:{size:"32",variant:"light-primary",src:e.item.avatar}}):t._e(),e.item.avatar?t._e():a("b-avatar",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.v-primary",modifiers:{hover:!0,"v-primary":!0}},{name:"b-tooltip",rawName:"v-b-tooltip.hover.right",value:e.item.description.details,expression:"data.item.description.details",modifiers:{hover:!0,right:!0}}]},[a("feather-icon",{attrs:{icon:"ServerIcon"}})],1)]},proxy:!0}],null,!0)},[a("span",{staticClass:"font-weight-bolder d-block text-nowrap"},[a("router-link",{attrs:{to:"./staking/"+e.item.operator_address}},[t._v(" "+t._s(e.item.description.moniker)+" ")])],1),a("small",{staticClass:"text-muted"},[t._v(t._s(e.item.description.website||e.item.description.identity))])])]}},{key:"cell(tokens)",fn:function(e){return[e.item.tokens>0?a("div",{staticClass:"d-flex flex-column"},[a("span",{staticClass:"font-weight-bold mb-0"},[t._v(t._s(t.tokenFormatter(e.item.tokens,t.stakingParameters.bond_denom)))]),a("span",{staticClass:"font-small-2 text-muted text-nowrap d-none d-lg-block"},[t._v(t._s(t.percent(e.item.tokens/t.stakingPool))+"%")])]):a("span",[t._v(t._s(e.item.delegator_shares))])]}},{key:"cell(changes)",fn:function(e){return[e.item.changes>0?a("small",{staticClass:"text-success"},[t._v("+"+t._s(e.item.changes))]):0===e.item.changes?a("small",[t._v("-")]):a("small",{staticClass:"text-danger"},[t._v(t._s(e.item.changes))])]}},{key:"cell(operation)",fn:function(e){return[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.operation-modal",modifiers:{"operation-modal":!0}}],attrs:{name:e.item.operator_address,variant:"primary",size:"sm"},on:{click:function(a){return t.selectValidator(e.item.operator_address)}}},[t._v(" Delegate ")])]}}],null,!1,1954446711)})],1):t._e(),a("b-card",{staticClass:"overflow-auto",attrs:{"no-body":""}},[a("b-card-header",{staticClass:"d-flex justify-content-between"},[a("b-form-group",{staticClass:"mb-0"},[a("b-form-radio-group",{attrs:{id:"btn-radios-1","button-variant":"outline-primary",options:t.statusOptions,buttons:"",name:"radios-btn-default"},on:{change:t.getValidatorListByStatus},model:{value:t.selectedStatus,callback:function(e){t.selectedStatus=e},expression:"selectedStatus"}})],1),a("b-card-title",{staticClass:"d-none d-sm-block"},[a("span",[t._v("Validators "+t._s(t.validators.length)+"/"+t._s(t.stakingParameters.max_validators)+" ")])])],1),a("b-card-body",{staticClass:"pl-0 pr-0 pb-0"},[a("b-table",{staticClass:"mb-0",attrs:{items:t.list,fields:t.validator_fields,"sort-desc":!0,"sort-by":"tokens",striped:"",hover:"",responsive:"sm"},scopedSlots:t._u([{key:"cell(index)",fn:function(e){return[a("b-badge",{attrs:{variant:t.rankBadge(e)}},[t._v(" "+t._s(e.index+1)+" ")])]}},{key:"cell(description)",fn:function(e){return[a("b-media",{staticClass:"text-truncate",staticStyle:{"max-width":"320px"},attrs:{"vertical-align":"center"},scopedSlots:t._u([{key:"aside",fn:function(){return[e.item.avatar?a("b-avatar",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.v-primary",modifiers:{hover:!0,"v-primary":!0}},{name:"b-tooltip",rawName:"v-b-tooltip.hover.right",value:e.item.description.details,expression:"data.item.description.details",modifiers:{hover:!0,right:!0}}],attrs:{size:"32",variant:"light-primary",src:e.item.avatar}}):t._e(),e.item.avatar?t._e():a("b-avatar",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.v-primary",modifiers:{hover:!0,"v-primary":!0}},{name:"b-tooltip",rawName:"v-b-tooltip.hover.right",value:e.item.description.details,expression:"data.item.description.details",modifiers:{hover:!0,right:!0}}]},[a("feather-icon",{attrs:{icon:"ServerIcon"}})],1)]},proxy:!0}],null,!0)},[a("span",{staticClass:"font-weight-bolder d-block text-nowrap"},[a("router-link",{attrs:{to:"./staking/"+e.item.operator_address}},[t._v(" "+t._s(e.item.description.moniker)+" ")])],1),a("small",{staticClass:"text-muted"},[t._v(t._s(e.item.description.website||e.item.description.identity))])])]}},{key:"cell(tokens)",fn:function(e){return[e.item.tokens>0?a("div",{staticClass:"d-flex flex-column"},[a("span",{staticClass:"font-weight-bold mb-0"},[t._v(t._s(t.tokenFormatter(e.item.tokens,t.stakingParameters.bond_denom)))]),a("span",{staticClass:"font-small-2 text-muted text-nowrap d-none d-lg-block"},[t._v(t._s(t.percent(e.item.tokens/t.stakingPool))+"%")])]):a("span",[t._v(t._s(e.item.delegator_shares))])]}},{key:"cell(changes)",fn:function(e){return[e.item.changes>0?a("small",{staticClass:"text-success"},[t._v("+"+t._s(e.item.changes))]):0===e.item.changes?a("small",[t._v("-")]):a("small",{staticClass:"text-danger"},[t._v(t._s(e.item.changes))])]}},{key:"cell(operation)",fn:function(e){return[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.operation-modal",modifiers:{"operation-modal":!0}}],attrs:{name:e.item.operator_address,variant:"primary",size:"sm"},on:{click:function(a){return t.selectValidator(e.item.operator_address)}}},[t._v(" Delegate ")])]}}])})],1),a("b-card-footer",{staticClass:"d-none d-md-block"},[a("small",[a("b-badge",{attrs:{variant:"danger"}},[t._v("   ")]),t._v(" Top 33% "),a("b-badge",{attrs:{variant:"warning"}},[t._v("   ")]),t._v(" Top 67% of Voting Power ")],1)])],1),a("operation-modal",{attrs:{type:"Delegate","validator-address":t.validator_address}}),a("div",{attrs:{id:"txevent"}})],1)},r=[],n=(a(57327),a(41539),a(82526),a(41817),a(21249),a(47941),a(9653),a(54747),a(92222),a(69826),a(8775)),o=a(13170),s=a(72775),l=a(75200),c=a(26034),d=a(87047),u=a(49379),v=a(40670),p=a(15193),f=a(62135),m=a(54013),g=a(37674),h=a(5870),b=a(35436),y=a(8392),_=a(92901),k={components:{BCard:n._,BTable:o.h,BMedia:s.P,BAvatar:l.SH,BBadge:c.k,BCardHeader:d.p,BCardTitle:u._,BCardBody:v.O,BButton:p.T,BFormRadioGroup:f.Q,BFormGroup:m.x,BCardFooter:g.F,OperationModal:_.Z},directives:{"b-tooltip":h.o},data:function(){return{islive:!0,validator_address:null,mintInflation:0,stakingPool:1,stakingParameters:new b.StakingParameters,validators:[],delegations:[],changes:{},latestPower:{},previousPower:{},validator_fields:[{key:"index",label:"#",tdClass:"d-none d-md-block",thClass:"d-none d-md-block"},{key:"description",label:"Validator"},{key:"tokens",label:"Voting Power",sortable:!0,tdClass:"text-right",thClass:"text-right",sortByFormatted:!0},{key:"changes",label:"24H Changes"},{key:"commission",formatter:function(t){return"".concat((0,b.percent)(t.rate),"%")},tdClass:"text-right",thClass:"text-right"},{key:"operation",label:"",tdClass:"text-right",thClass:"text-right"}],statusOptions:[{text:"Active",value:"active"},{text:"Inactive",value:"inactive"}],selectedStatus:"active",isInactiveLoaded:!1,inactiveValidators:[]}},computed:{pingVals:function(){return this.list.filter((function(t){return"6783E9F948541962"===t.description.identity}))},list:function(){var t=this,e="active"===this.selectedStatus?this.validators:this.inactiveValidators;return e.map((function(e){var a=e;if(Object.keys(t.latestPower).length>0&&Object.keys(t.previousPower).length>0){var i=t.latestPower[e.consensus_pubkey.value]||0,r=t.previousPower[e.consensus_pubkey.value]||0;a.changes=i-r}return a}))}},created:function(){var t=this;this.$http.getStakingPool().then((function(e){t.stakingPool=e.bondedToken})),this.$http.getStakingParameters().then((function(e){t.stakingParameters=e})),this.initial()},beforeDestroy:function(){this.islive=!1},mounted:function(){var t=this,e=document.getElementById("txevent");e.addEventListener("txcompleted",(function(){t.initial()}))},methods:{initial:function(){var t=this;this.$http.getValidatorList().then((function(e){for(var a=[],i=e,r=0;r<i.length;r+=1){var n=i[r].description.identity,o=t.$store.getters["chains/getAvatarById"](n);o?i[r].avatar=o:n&&""!==n&&a.push(n)}var s=Promise.resolve();a.forEach((function(e){s=s.then((function(){return new Promise((function(a){t.avatar(e,a)}))}))})),t.validators=i,t.getPreviousPower(t.validators.length)}))},getPreviousPower:function(t){var e=this;this.$http.getValidatorListByHeight("latest",0).then((function(a){var i=Number(a.block_height);i>14400?i-=14400:i=1,a.validators.forEach((function(t){e.$set(e.latestPower,t.pub_key.key,Number(t.voting_power))}));for(var r=100;r<t;r+=100)e.$http.getValidatorListByHeight("latest",r).then((function(t){t.validators.forEach((function(t){e.$set(e.latestPower,t.pub_key.key,Number(t.voting_power))}))}));for(var n=0;n<t;n+=100)e.$http.getValidatorListByHeight(i,n).then((function(t){t.validators.forEach((function(t){e.$set(e.previousPower,t.pub_key.key,Number(t.voting_power))}))}))}))},getValidatorListByStatus:function(){var t=this;if(!this.isInactiveLoaded){var e=["BOND_STATUS_UNBONDED","BOND_STATUS_UNBONDING"];e.forEach((function(e){t.$http.getValidatorListByStatus(e).then((function(e){for(var a=[],i=e,r=0;r<i.length;r+=1){var n=i[r].description.identity,o=t.$store.getters["chains/getAvatarById"](n);o?i[r].avatar=o:n&&""!==n&&a.push(n)}var s=Promise.resolve();a.forEach((function(e){s=s.then((function(){return new Promise((function(a){t.avatar(e,a)}))}))})),t.inactiveValidators=t.inactiveValidators.concat(e)}))})),this.isInactiveLoaded=!0}},selectValidator:function(t){this.validator_address=t},percent:b.percent,tokenFormatter:function(t,e){return(0,b.formatToken)({amount:t,denom:e},{},0)},rankBadge:function(t){if("inactive"===this.selectedStatus)return"primary";var e=t.index,a=t.item;0===e?window.sum=a.tokens:window.sum+=a.tokens;var i=window.sum/this.stakingPool;return i<.333?"danger":i<.67?"warning":"primary"},avatar:function(t,e){var a=this;this.islive&&(0,y.i)(t).then((function(i){if(e(),Array.isArray(i.them)&&i.them.length>0){var r=i.them[0].pictures;if(r){var n="active"===a.selectedStatus?a.validators:a.inactiveValidators,o=n.find((function(e){return e.description.identity===t}));a.$set(o,"avatar",r.primary.url),a.$store.commit("cacheAvatar",{identity:t,url:r.primary.url})}}}))}}},w=k,P=a(1001),x=(0,P.Z)(w,i,r,!1,null,null,null),C=x.exports},26034:function(t,e,a){a.d(e,{k:function(){return g}});var i=a(20144),r=a(69558),n=a(94689),o=a(12299),s=a(67040),l=a(20451),c=a(30488),d=a(67347);function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function v(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),!0).forEach((function(e){p(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function p(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var f=(0,s.CE)(d.NQ,["event","routerTag"]);delete f.href.default,delete f.to.default;var m=(0,l.y2)((0,s.GE)(v(v({},f),{},{pill:(0,l.pi)(o.U5,!1),tag:(0,l.pi)(o.N0,"span"),variant:(0,l.pi)(o.N0,"secondary")})),n.dJ),g=i["default"].extend({name:n.dJ,functional:!0,props:m,render:function(t,e){var a=e.props,i=e.data,n=e.children,o=a.active,s=a.disabled,u=(0,c.u$)(a),v=u?d.we:a.tag,p=a.variant||"secondary";return t(v,(0,r.b)(i,{staticClass:"badge",class:["badge-".concat(p),{"badge-pill":a.pill,active:o,disabled:s}],props:u?(0,l.uj)(f,a):{}}),n)}})},87272:function(t,e,a){a.d(e,{D:function(){return d}});var i=a(20144),r=a(69558),n=a(94689),o=a(12299),s=a(20451);function l(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var c=(0,s.y2)({right:(0,s.pi)(o.U5,!1),tag:(0,s.pi)(o.N0,"div"),verticalAlign:(0,s.pi)(o.N0,"top")},n.u7),d=i["default"].extend({name:n.u7,functional:!0,props:c,render:function(t,e){var a=e.props,i=e.data,n=e.children,o=a.verticalAlign,s="top"===o?"start":"bottom"===o?"end":o;return t(a.tag,(0,r.b)(i,{staticClass:"media-aside",class:l({"media-aside-right":a.right},"align-self-".concat(s),s)}),n)}})},81843:function(t,e,a){a.d(e,{D:function(){return c}});var i=a(20144),r=a(69558),n=a(94689),o=a(12299),s=a(20451),l=(0,s.y2)({tag:(0,s.pi)(o.N0,"div")},n.Ub),c=i["default"].extend({name:n.Ub,functional:!0,props:l,render:function(t,e){var a=e.props,i=e.data,n=e.children;return t(a.tag,(0,r.b)(i,{staticClass:"media-body"}),n)}})},72775:function(t,e,a){a.d(e,{P:function(){return p}});var i=a(20144),r=a(69558),n=a(94689),o=a(12299),s=a(90494),l=a(72345),c=a(20451),d=a(87272),u=a(81843),v=(0,c.y2)({noBody:(0,c.pi)(o.U5,!1),rightAlign:(0,c.pi)(o.U5,!1),tag:(0,c.pi)(o.N0,"div"),verticalAlign:(0,c.pi)(o.N0,"top")},n.vF),p=i["default"].extend({name:n.vF,functional:!0,props:v,render:function(t,e){var a=e.props,i=e.data,n=e.slots,o=e.scopedSlots,c=e.children,v=a.noBody,p=a.rightAlign,f=a.verticalAlign,m=v?c:[];if(!v){var g={},h=n(),b=o||{};m.push(t(u.D,(0,l.O)(s.Pq,g,b,h)));var y=(0,l.O)(s.Q2,g,b,h);y&&m[p?"push":"unshift"](t(d.D,{props:{right:p,verticalAlign:f}},y))}return t(a.tag,(0,r.b)(i,{staticClass:"media"}),m)}})},5870:function(t,e,a){a.d(e,{o:function(){return A}});var i=a(94689),r=a(43935),n=a(63294),o=a(11572),s=a(79968),l=a(13597),c=a(68265),d=a(33284),u=a(3058),v=a(93954),p=a(67040),f=a(40960);function m(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function g(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?m(Object(a),!0).forEach((function(e){h(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function h(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var b="__BV_Tooltip__",y="hover focus",_={focus:!0,hover:!0,click:!0,blur:!0,manual:!0},k=/^html$/i,w=/^noninteractive$/i,P=/^nofade$/i,x=/^(auto|top(left|right)?|bottom(left|right)?|left(top|bottom)?|right(top|bottom)?)$/i,C=/^(window|viewport|scrollParent)$/i,O=/^d\d+$/i,B=/^ds\d+$/i,j=/^dh\d+$/i,S=/^o-?\d+$/i,N=/^v-.+$/i,$=/\s+/,D=function(t,e){var a={title:void 0,trigger:"",placement:"top",fallbackPlacement:"flip",container:!1,animation:!0,offset:0,id:null,html:!1,interactive:!0,disabled:!1,delay:(0,s.wJ)(i.qv,"delay",50),boundary:String((0,s.wJ)(i.qv,"boundary","scrollParent")),boundaryPadding:(0,v.Z3)((0,s.wJ)(i.qv,"boundaryPadding",5),0),variant:(0,s.wJ)(i.qv,"variant"),customClass:(0,s.wJ)(i.qv,"customClass")};if((0,d.HD)(t.value)||(0,d.hj)(t.value)||(0,d.mf)(t.value)?a.title=t.value:(0,d.PO)(t.value)&&(a=g(g({},a),t.value)),(0,d.o8)(a.title)){var r=e.data||{};a.title=r.attrs&&!(0,d.Jp)(r.attrs.title)?r.attrs.title:void 0}(0,d.PO)(a.delay)||(a.delay={show:(0,v.Z3)(a.delay,0),hide:(0,v.Z3)(a.delay,0)}),t.arg&&(a.container="#".concat(t.arg)),(0,p.XP)(t.modifiers).forEach((function(t){if(k.test(t))a.html=!0;else if(w.test(t))a.interactive=!1;else if(P.test(t))a.animation=!1;else if(x.test(t))a.placement=t;else if(C.test(t))t="scrollparent"===t?"scrollParent":t,a.boundary=t;else if(O.test(t)){var e=(0,v.Z3)(t.slice(1),0);a.delay.show=e,a.delay.hide=e}else B.test(t)?a.delay.show=(0,v.Z3)(t.slice(2),0):j.test(t)?a.delay.hide=(0,v.Z3)(t.slice(2),0):S.test(t)?a.offset=(0,v.Z3)(t.slice(1),0):N.test(t)&&(a.variant=t.slice(2)||null)}));var n={};return(0,o.zo)(a.trigger||"").filter(c.y).join(" ").trim().toLowerCase().split($).forEach((function(t){_[t]&&(n[t]=!0)})),(0,p.XP)(t.modifiers).forEach((function(t){t=t.toLowerCase(),_[t]&&(n[t]=!0)})),a.trigger=(0,p.XP)(n).join(" "),"blur"===a.trigger&&(a.trigger="focus"),a.trigger||(a.trigger=y),a},V=function(t,e,a){if(r.Qg){var i=D(e,a);if(!t[b]){var o=a.context;t[b]=new f.j({parent:o,_scopeId:(0,l.P)(o,void 0)}),t[b].__bv_prev_data__={},t[b].$on(n.l0,(function(){(0,d.mf)(i.title)&&t[b].updateData({title:i.title(t)})}))}var s={title:i.title,triggers:i.trigger,placement:i.placement,fallbackPlacement:i.fallbackPlacement,variant:i.variant,customClass:i.customClass,container:i.container,boundary:i.boundary,delay:i.delay,offset:i.offset,noFade:!i.animation,id:i.id,interactive:i.interactive,disabled:i.disabled,html:i.html},c=t[b].__bv_prev_data__;if(t[b].__bv_prev_data__=s,!(0,u.W)(s,c)){var v={target:t};(0,p.XP)(s).forEach((function(e){s[e]!==c[e]&&(v[e]="title"===e&&(0,d.mf)(s[e])?s[e](t):s[e])})),t[b].updateData(v)}}},E=function(t){t[b]&&(t[b].$destroy(),t[b]=null),delete t[b]},A={bind:function(t,e,a){V(t,e,a)},componentUpdated:function(t,e,a){a.context.$nextTick((function(){V(t,e,a)}))},unbind:function(t){E(t)}}}}]);