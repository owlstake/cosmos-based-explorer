{"ast":null,"code":"import \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.error.cause.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.test.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport { watch as e, inject as t, computed as n, unref as o, watchEffect as r, defineComponent as i, shallowRef as a, toRefs as u, onMounted as c, onUnmounted as s, h as l, Vue2 as p, nextTick as v } from \"vue-demi\";\nimport { throttle as f, init as d } from \"echarts/core\";\nimport { addListener as g, removeListener as h } from \"resize-detector\";\n\nvar _O = function O() {\n  return (_O = Object.assign || function (e) {\n    for (var t, n = 1, o = arguments.length; n < o; n++) {\n      for (var r in t = arguments[n]) {\n        Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);\n      }\n    }\n\n    return e;\n  }).apply(this, arguments);\n},\n    m = [\"getWidth\", \"getHeight\", \"getDom\", \"getOption\", \"resize\", \"dispatchAction\", \"convertToPixel\", \"convertFromPixel\", \"containPixel\", \"getDataURL\", \"getConnectedDataURL\", \"appendData\", \"clear\", \"isDisposed\", \"dispose\"];\n\nfunction b(e) {\n  return t = Object.create(null), m.forEach(function (n) {\n    t[n] = function (t) {\n      return function () {\n        for (var n = [], o = 0; o < arguments.length; o++) {\n          n[o] = arguments[o];\n        }\n\n        if (!e.value) throw new Error(\"ECharts is not initialized yet.\");\n        return e.value[t].apply(e.value, n);\n      };\n    }(n);\n  }), t;\n  var t;\n}\n\nvar y = {\n  autoresize: Boolean\n},\n    x = \"ecLoadingOptions\";\nvar j = {\n  loading: Boolean,\n  loadingOptions: Object\n},\n    E = [],\n    z = [];\n!function (e, t) {\n  if (e && \"undefined\" != typeof document) {\n    var n,\n        o = !0 === t.prepend ? \"prepend\" : \"append\",\n        r = !0 === t.singleTag,\n        i = \"string\" == typeof t.container ? document.querySelector(t.container) : document.getElementsByTagName(\"head\")[0];\n\n    if (r) {\n      var a = E.indexOf(i);\n      -1 === a && (a = E.push(i) - 1, z[a] = {}), n = z[a] && z[a][o] ? z[a][o] : z[a][o] = u();\n    } else n = u();\n\n    65279 === e.charCodeAt(0) && (e = e.substring(1)), n.styleSheet ? n.styleSheet.cssText += e : n.appendChild(document.createTextNode(e));\n  }\n\n  function u() {\n    var e = document.createElement(\"style\");\n    if (e.setAttribute(\"type\", \"text/css\"), t.attributes) for (var n = Object.keys(t.attributes), r = 0; r < n.length; r++) {\n      e.setAttribute(n[r], t.attributes[n[r]]);\n    }\n    var a = \"prepend\" === o ? \"afterbegin\" : \"beforeend\";\n    return i.insertAdjacentElement(a, e), e;\n  }\n}(\"x-vue-echarts{display:block;width:100%;height:100%}\", {});\n\nvar A = /^on[^a-z]/,\n    L = function L(e) {\n  return A.test(e);\n};\n\np && p.config.ignoredElements.push(\"x-vue-echarts\");\nvar w = \"ecTheme\",\n    C = \"ecInitOptions\",\n    T = \"ecUpdateOptions\",\n    U = i({\n  name: \"echarts\",\n  props: _O(_O({\n    option: Object,\n    theme: {\n      type: [Object, String]\n    },\n    initOptions: Object,\n    updateOptions: Object,\n    group: String,\n    manualUpdate: Boolean\n  }, y), j),\n  inheritAttrs: !1,\n  setup: function setup(i, l) {\n    var p = l.attrs,\n        m = l.listeners,\n        y = a(),\n        x = a(),\n        j = a(),\n        E = t(\"ecTheme\", null),\n        z = t(\"ecInitOptions\", null),\n        A = t(\"ecUpdateOptions\", null),\n        w = u(i),\n        C = w.autoresize,\n        T = w.manualUpdate,\n        U = w.loading,\n        D = w.loadingOptions,\n        S = n(function () {\n      return j.value || i.option || null;\n    }),\n        k = n(function () {\n      return i.theme || o(E) || {};\n    }),\n        B = n(function () {\n      return i.initOptions || o(z) || {};\n    }),\n        P = n(function () {\n      return i.updateOptions || o(A) || {};\n    }),\n        I = n(function () {\n      return function (e) {\n        var t = {};\n\n        for (var n in e) {\n          L(n) || (t[n] = e[n]);\n        }\n\n        return t;\n      }(p);\n    });\n\n    function N(e) {\n      if (y.value) {\n        var t = x.value = d(y.value, k.value, B.value);\n        i.group && (t.group = i.group);\n        var n = m;\n        n || (n = {}, Object.keys(p).filter(function (e) {\n          return 0 === e.indexOf(\"on\") && e.length > 2;\n        }).forEach(function (e) {\n          var t = e.charAt(2).toLowerCase() + e.slice(3);\n          n[t] = p[e];\n        })), Object.keys(n).forEach(function (e) {\n          var o = n[e];\n          o && (0 === e.indexOf(\"zr:\") ? t.getZr().on(e.slice(3).toLowerCase(), o) : t.on(e.toLowerCase(), o));\n        }), C.value ? v(function () {\n          t && !t.isDisposed() && t.resize(), o();\n        }) : o();\n      }\n\n      function o() {\n        var n = e || S.value;\n        n && t.setOption(n, P.value);\n      }\n    }\n\n    function R() {\n      x.value && (x.value.dispose(), x.value = void 0);\n    }\n\n    var q = null;\n    e(T, function (t) {\n      \"function\" == typeof q && (q(), q = null), t || (q = e(function () {\n        return i.option;\n      }, function (e, t) {\n        e && (x.value ? x.value.setOption(e, _O({\n          notMerge: e.value !== (null == t ? void 0 : t.value)\n        }, P.value)) : N());\n      }, {\n        deep: !0\n      }));\n    }, {\n      immediate: !0\n    }), e([k, B], function () {\n      R(), N();\n    }, {\n      deep: !0\n    }), r(function () {\n      i.group && x.value && (x.value.group = i.group);\n    });\n    var F = b(x);\n    return function (e, i, a) {\n      var u = t(\"ecLoadingOptions\", {}),\n          c = n(function () {\n        return _O(_O({}, o(u)), null == a ? void 0 : a.value);\n      });\n      r(function () {\n        var t = e.value;\n        t && (i.value ? t.showLoading(c.value) : t.hideLoading());\n      });\n    }(x, U, D), function (t, n, o) {\n      var r = null;\n      e([o, t, n], function (e, t, n) {\n        var o = e[0],\n            i = e[1],\n            a = e[2];\n        o && i && a && (r = f(function () {\n          i.resize();\n        }, 100), g(o, r)), n(function () {\n          r && o && h(o, r);\n        });\n      });\n    }(x, C, y), c(function () {\n      N();\n    }), s(R), _O({\n      chart: x,\n      root: y,\n      setOption: function setOption(e, t) {\n        i.manualUpdate && (j.value = e), x.value ? x.value.setOption(e, t || {}) : N(e);\n      },\n      nonEventAttrs: I\n    }, F);\n  },\n  render: function render() {\n    var e = _O({}, this.nonEventAttrs);\n\n    return e.ref = \"root\", e.class = e.class ? [\"echarts\"].concat(e.class) : \"echarts\", l(\"x-vue-echarts\", e);\n  }\n});\nexport default U;\nexport { C as INIT_OPTIONS_KEY, x as LOADING_OPTIONS_KEY, w as THEME_KEY, T as UPDATE_OPTIONS_KEY };","map":{"version":3,"mappings":"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","names":["METHOD_NAMES","usePublicAPI","chart","methods","Object","create","forEach","name","_i","args","value","Error","apply","makePublicMethod","autoresizeProps","autoresize","Boolean","LOADING_OPTIONS_KEY","loadingProps","loading","loadingOptions","e","t","n","r","document","a","s","prepend","d","singleTag","i","container","querySelector","getElementsByTagName","u","indexOf","push","c","charCodeAt","substring","styleSheet","cssText","appendChild","createTextNode","createElement","setAttribute","attributes","keys","length","insertAdjacentElement","onRE","isOn","key","test","Vue2","config","ignoredElements","THEME_KEY","INIT_OPTIONS_KEY","UPDATE_OPTIONS_KEY","U","defineComponent","props","option","theme","type","String","initOptions","updateOptions","group","manualUpdate","inheritAttrs","setup","_a","attrs","listeners","root","shallowRef","manualOption","defaultTheme","inject","defaultInitOptions","defaultUpdateOptions","_b","toRefs","realOption","computed","realTheme","unref","realInitOptions","realUpdateOptions","nonEventAttrs","result","omitOn","init","instance","initChart","realListeners","filter","event","charAt","toLowerCase","slice","handler","getZr","on","nextTick","isDisposed","resize","commit","opt","setOption","cleanup","dispose","undefined","unwatchOption","watch","oldOption","notMerge","deep","immediate","watchEffect","publicApi","defaultLoadingOptions","realLoadingOptions","showLoading","hideLoading","useLoading","resizeListener","_","throttle","addListener","removeListener","useAutoresize","onMounted","onUnmounted","render","this","ref","class","concat","h"],"sources":["../src/composables/api.ts","../src/composables/autoresize.ts","../src/composables/loading.ts","../node_modules/rollup-plugin-styles/dist/runtime/inject-css.js","../src/utils.ts","../src/ECharts.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { Ref } from \"vue-demi\";\nimport { EChartsType } from \"../types\";\n\nconst METHOD_NAMES = [\n  \"getWidth\",\n  \"getHeight\",\n  \"getDom\",\n  \"getOption\",\n  \"resize\",\n  \"dispatchAction\",\n  \"convertToPixel\",\n  \"convertFromPixel\",\n  \"containPixel\",\n  \"getDataURL\",\n  \"getConnectedDataURL\",\n  \"appendData\",\n  \"clear\",\n  \"isDisposed\",\n  \"dispose\"\n] as const;\ntype MethodName = typeof METHOD_NAMES[number];\n\ntype PublicMethods = Pick<EChartsType, MethodName>;\n\nexport function usePublicAPI(\n  chart: Ref<EChartsType | undefined>\n): PublicMethods {\n  function makePublicMethod<T extends MethodName>(\n    name: T\n  ): (...args: Parameters<EChartsType[T]>) => ReturnType<EChartsType[T]> {\n    return (...args) => {\n      if (!chart.value) {\n        throw new Error(\"ECharts is not initialized yet.\");\n      }\n      return (chart.value[name] as any).apply(chart.value, args);\n    };\n  }\n\n  function makePublicMethods(): PublicMethods {\n    const methods = Object.create(null);\n    METHOD_NAMES.forEach(name => {\n      methods[name] = makePublicMethod(name);\n    });\n\n    return methods as PublicMethods;\n  }\n\n  return makePublicMethods();\n}\n","import { Ref, watch } from \"vue-demi\";\nimport { throttle } from \"echarts/core\";\nimport { addListener, removeListener, ResizeCallback } from \"resize-detector\";\nimport { EChartsType } from \"../types\";\n\nexport function useAutoresize(\n  chart: Ref<EChartsType | undefined>,\n  autoresize: Ref<boolean>,\n  root: Ref<HTMLElement | undefined>\n): void {\n  let resizeListener: ResizeCallback | null = null;\n\n  watch([root, chart, autoresize], ([root, chart, autoresize], _, cleanup) => {\n    if (root && chart && autoresize) {\n      resizeListener = throttle(() => {\n        chart.resize();\n      }, 100);\n\n      addListener(root, resizeListener);\n    }\n\n    cleanup(() => {\n      if (resizeListener && root) {\n        removeListener(root, resizeListener);\n      }\n    });\n  });\n}\n\nexport const autoresizeProps = {\n  autoresize: Boolean\n};\n","import { inject, unref, computed, Ref, watchEffect } from \"vue-demi\";\nimport { EChartsType } from \"../types\";\n\nexport const LOADING_OPTIONS_KEY = \"ecLoadingOptions\";\n\ntype UnknownRecord = Record<string, unknown>;\n\nexport function useLoading(\n  chart: Ref<EChartsType | undefined>,\n  loading: Ref<boolean>,\n  loadingOptions: Ref<UnknownRecord | undefined>\n): void {\n  const defaultLoadingOptions = inject(LOADING_OPTIONS_KEY, {}) as\n    | UnknownRecord\n    | Ref<UnknownRecord>;\n  const realLoadingOptions = computed(() => ({\n    ...unref(defaultLoadingOptions),\n    ...loadingOptions?.value\n  }));\n\n  watchEffect(() => {\n    const instance = chart.value;\n    if (!instance) {\n      return;\n    }\n\n    if (loading.value) {\n      instance.showLoading(realLoadingOptions.value);\n    } else {\n      instance.hideLoading();\n    }\n  });\n}\n\nexport const loadingProps = {\n  loading: Boolean,\n  loadingOptions: Object\n};\n","var e=[],t=[];function n(n,r){if(n&&\"undefined\"!=typeof document){var a,s=!0===r.prepend?\"prepend\":\"append\",d=!0===r.singleTag,i=\"string\"==typeof r.container?document.querySelector(r.container):document.getElementsByTagName(\"head\")[0];if(d){var u=e.indexOf(i);-1===u&&(u=e.push(i)-1,t[u]={}),a=t[u]&&t[u][s]?t[u][s]:t[u][s]=c()}else a=c();65279===n.charCodeAt(0)&&(n=n.substring(1)),a.styleSheet?a.styleSheet.cssText+=n:a.appendChild(document.createTextNode(n))}function c(){var e=document.createElement(\"style\");if(e.setAttribute(\"type\",\"text/css\"),r.attributes)for(var t=Object.keys(r.attributes),n=0;n<t.length;n++)e.setAttribute(t[n],r.attributes[t[n]]);var a=\"prepend\"===s?\"afterbegin\":\"beforeend\";return i.insertAdjacentElement(a,e),e}}export default n;\n","type Attrs = {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  [key: string]: any;\n};\n\n// Copied from\n// https://github.com/vuejs/vue-next/blob/5a7a1b8293822219283d6e267496bec02234b0bc/packages/shared/src/index.ts#L40-L41\nconst onRE = /^on[^a-z]/;\nexport const isOn = (key: string): boolean => onRE.test(key);\n\nexport function omitOn(attrs: Attrs): Attrs {\n  const result: Attrs = {};\n  for (const key in attrs) {\n    if (!isOn(key)) {\n      result[key] = attrs[key];\n    }\n  }\n\n  return result;\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport {\n  defineComponent,\n  unref,\n  shallowRef,\n  toRefs,\n  watch,\n  computed,\n  inject,\n  onMounted,\n  onUnmounted,\n  h,\n  nextTick,\n  PropType,\n  watchEffect,\n  Vue2\n} from \"vue-demi\";\nimport { init as initChart } from \"echarts/core\";\nimport {\n  EChartsType,\n  Option,\n  Theme,\n  ThemeInjection,\n  InitOptions,\n  InitOptionsInjection,\n  UpdateOptions,\n  UpdateOptionsInjection\n} from \"./types\";\nimport {\n  usePublicAPI,\n  useAutoresize,\n  autoresizeProps,\n  useLoading,\n  loadingProps\n} from \"./composables\";\nimport \"./style.css\";\nimport { omitOn } from \"./utils\";\n\nconst TAG_NAME = \"x-vue-echarts\";\n\nif (Vue2) {\n  Vue2.config.ignoredElements.push(TAG_NAME);\n}\n\nexport const THEME_KEY = \"ecTheme\";\nexport const INIT_OPTIONS_KEY = \"ecInitOptions\";\nexport const UPDATE_OPTIONS_KEY = \"ecUpdateOptions\";\nexport { LOADING_OPTIONS_KEY } from \"./composables\";\n\nexport default defineComponent({\n  name: \"echarts\",\n  props: {\n    option: Object as PropType<Option>,\n    theme: {\n      type: [Object, String] as PropType<Theme>\n    },\n    initOptions: Object as PropType<InitOptions>,\n    updateOptions: Object as PropType<UpdateOptions>,\n    group: String,\n    manualUpdate: Boolean,\n    ...autoresizeProps,\n    ...loadingProps\n  },\n  inheritAttrs: false,\n  // @ts-expect-error listeners for Vue 2 compatibility\n  setup(props, { attrs, listeners }) {\n    const root = shallowRef<HTMLElement>();\n    const chart = shallowRef<EChartsType>();\n    const manualOption = shallowRef<Option>();\n    const defaultTheme = inject(THEME_KEY, null) as ThemeInjection;\n    const defaultInitOptions = inject(\n      INIT_OPTIONS_KEY,\n      null\n    ) as InitOptionsInjection;\n    const defaultUpdateOptions = inject(\n      UPDATE_OPTIONS_KEY,\n      null\n    ) as UpdateOptionsInjection;\n\n    const { autoresize, manualUpdate, loading, loadingOptions } = toRefs(props);\n\n    const realOption = computed(\n      () => manualOption.value || props.option || null\n    );\n    const realTheme = computed(() => props.theme || unref(defaultTheme) || {});\n    const realInitOptions = computed(\n      () => props.initOptions || unref(defaultInitOptions) || {}\n    );\n    const realUpdateOptions = computed(\n      () => props.updateOptions || unref(defaultUpdateOptions) || {}\n    );\n    const nonEventAttrs = computed(() => omitOn(attrs));\n\n    function init(option?: Option) {\n      if (!root.value) {\n        return;\n      }\n\n      const instance = (chart.value = initChart(\n        root.value,\n        realTheme.value,\n        realInitOptions.value\n      ));\n\n      if (props.group) {\n        instance.group = props.group;\n      }\n\n      let realListeners = listeners;\n      if (!realListeners) {\n        realListeners = {};\n\n        Object.keys(attrs)\n          .filter(key => key.indexOf(\"on\") === 0 && key.length > 2)\n          .forEach(key => {\n            // onClick    -> c + lick\n            // onZr:click -> z + r:click\n            const event = key.charAt(2).toLowerCase() + key.slice(3);\n            realListeners[event] = attrs[key];\n          });\n      }\n\n      Object.keys(realListeners).forEach(key => {\n        const handler = realListeners[key] as any;\n\n        if (!handler) {\n          return;\n        }\n\n        if (key.indexOf(\"zr:\") === 0) {\n          instance.getZr().on(key.slice(3).toLowerCase(), handler);\n        } else {\n          instance.on(key.toLowerCase(), handler);\n        }\n      });\n\n      function resize() {\n        if (instance && !instance.isDisposed()) {\n          instance.resize();\n        }\n      }\n\n      function commit() {\n        const opt = option || realOption.value;\n        if (opt) {\n          instance.setOption(opt, realUpdateOptions.value);\n        }\n      }\n\n      if (autoresize.value) {\n        // Try to make chart fit to container in case container size\n        // is changed synchronously or in already queued microtasks\n        nextTick(() => {\n          resize();\n          commit();\n        });\n      } else {\n        commit();\n      }\n    }\n\n    function setOption(option: Option, updateOptions?: UpdateOptions) {\n      if (props.manualUpdate) {\n        manualOption.value = option;\n      }\n\n      if (!chart.value) {\n        init(option);\n      } else {\n        chart.value.setOption(option, updateOptions || {});\n      }\n    }\n\n    function cleanup() {\n      if (chart.value) {\n        chart.value.dispose();\n        chart.value = undefined;\n      }\n    }\n\n    let unwatchOption: (() => void) | null = null;\n    watch(\n      manualUpdate,\n      manualUpdate => {\n        if (typeof unwatchOption === \"function\") {\n          unwatchOption();\n          unwatchOption = null;\n        }\n\n        if (!manualUpdate) {\n          unwatchOption = watch(\n            () => props.option,\n            (option, oldOption) => {\n              if (!option) {\n                return;\n              }\n              if (!chart.value) {\n                init();\n              } else {\n                chart.value.setOption(option, {\n                  notMerge: option.value !== oldOption?.value,\n                  ...realUpdateOptions.value\n                });\n              }\n            },\n            { deep: true }\n          );\n        }\n      },\n      {\n        immediate: true\n      }\n    );\n\n    watch(\n      [realTheme, realInitOptions],\n      () => {\n        cleanup();\n        init();\n      },\n      {\n        deep: true\n      }\n    );\n\n    watchEffect(() => {\n      if (props.group && chart.value) {\n        chart.value.group = props.group;\n      }\n    });\n\n    const publicApi = usePublicAPI(chart);\n\n    useLoading(chart, loading, loadingOptions);\n\n    useAutoresize(chart, autoresize, root);\n\n    onMounted(() => {\n      init();\n    });\n\n    onUnmounted(cleanup);\n\n    return {\n      chart,\n      root,\n      setOption,\n      nonEventAttrs,\n      ...publicApi\n    };\n  },\n  render() {\n    const attrs = { ...this.nonEventAttrs };\n    attrs.ref = \"root\";\n    attrs.class = attrs.class ? [\"echarts\"].concat(attrs.class) : \"echarts\";\n    return h(TAG_NAME, attrs);\n  }\n});\n"]},"metadata":{},"sourceType":"module"}